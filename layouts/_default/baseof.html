<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

{{- $brand := site.Data.site.brand.name | default site.Title -}}
{{- $page := .Title -}}
{{- $title := $brand -}}

{{- with .Params.seo_title -}}
  {{- $title = . -}}
{{- else -}}
  {{- if and (not .IsHome) $page -}}
    {{- $title = printf "%s | %s" $page $brand -}}
  {{- end -}}
{{- end -}}

<title>{{ $title }}</title>

  {{- $desc := "" -}}
  {{- with .Params.description -}}
    {{- $desc = . -}}
  {{- else -}}
    {{- with site.Data.site.brand.tagline -}}
      {{- $desc = . -}}
    {{- end -}}
  {{- end -}}
  {{- if $desc -}}
  <meta name="description" content="{{ $desc }}">
  {{- end -}}

  <link rel="canonical" href="{{ .Permalink }}">

  <meta property="og:site_name" content="{{ $brand }}">
  <meta property="og:title" content="{{ $title }}">
  {{- if $desc -}}
  <meta property="og:description" content="{{ $desc }}">
  <meta name="twitter:description" content="{{ $desc }}">
  {{- end -}}
  <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta name="twitter:card" content="summary_large_image">

  {{- $og := "" -}}
  {{- with .Params.og_image -}}
    {{- $og = . -}}
  {{- else -}}
    {{- with site.Data.site.brand.og_image -}}
      {{- $og = . -}}
    {{- end -}}
  {{- end -}}
  {{- if not $og -}}
    {{- if (fileExists "static/images/og.jpg") -}}
      {{- $og = "/images/og.jpg" -}}
    {{- end -}}
  {{- end -}}
  {{- if $og -}}
  <meta property="og:image" content="{{ $og | absURL }}">
  <meta name="twitter:image" content="{{ $og | absURL }}">
  {{- end -}}

  <link rel="stylesheet" href="/css/site.css">

  {{ partial "schema.html" . }}

  <!-- PWA manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- Favicons (root paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#111111">
</head>

<body>

{{ partial "announcement.html" . }}

<header class="site-header">
  <div class="nav-wrap">
    <a class="brand" href="/" aria-label="{{ $brand }} home">
      <img class="brand-logo" src="{{ site.Data.site.brand.logo }}" alt="{{ $brand }}">
    </a>

    <button class="nav-toggle" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <nav class="nav-right" aria-label="primary">
      <a class="nav-link" href="/">Home</a>
      <a class="nav-link" href="{{ "contact/" | relURL }}">Contact</a>
      <a class="nav-link" href="{{ "menu/" | relURL }}">Menu</a>
      <a class="nav-link" href="{{ "lunch_specials/" | relURL }}">Lunch specials</a>

      <a class="nav-link nav-cta nav-cta-mobile"
         href="{{ site.Data.site.links.reservation_url }}"
         target="_blank" rel="noopener">Reservation</a>
    </nav>

    <div class="nav-backdrop" aria-hidden="true"></div>
  </div>
</header>

<main class="site-main">
  {{ block "main" . }}{{ end }}
</main>

<footer class="site-footer">
  {{ partial "footer.html" . }}
</footer>

<script src="/js/nav.js" defer></script>

{{ if .IsHome }}
<script src="/js/slider.js" defer></script>
{{ end }}

{{ if eq (.Params.page_kind | default "") "menu" }}
<script src="/js/menu.js" defer></script>
{{ end }}

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function () {
    navigator.serviceWorker.register('/service-worker.js').catch(function (err) {
      console.log('Service Worker registration failed:', err);
    });
  });
}
</script>

</body>
</html>